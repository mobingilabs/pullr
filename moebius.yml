# Builds only changed projects, changed projects detected by git hash range
# default true
onlyChanged: true

vars:
  out: "{{.dir}}/bin"

# define your artifacts under artifacts
# path - directory of your
# hooks:
#   build       - run commands to build
#   beforeBuild - run commands before starting to build
#   afterBuild  - run commands after build successfully finished
projects:
  apisrv:
    path: ./cmd/apisrv
    build:
      - go build -v -o {{.out}}/apisrv
    test:
      - go test $(go list ./...)

  authsrv:
    path: ./cmd/authsrv
    build:
      - go build -v -o {{.out}}/authsrv

  buildctl:
    path: ./cmd/buildctl

  eventsrv:
    path: ./cmd/eventsrv
    build:
      - go build -v -o {{.out}}/eventsrv